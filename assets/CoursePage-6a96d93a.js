import{a as ot,g as ct,s as dt,_ as je,r as u,u as ut,b as ht,j as e,d as mt,c as pe,e as xt,B as o,C as We,v as O,w as T,x as S,H as jt,E as oe,D as pt,F as gt,G as bt}from"./index-c2563e0d.js";import{P as vt,C as v}from"./PageContainer-aad2cfc7.js";import{D as yt,C as k}from"./DashboardCard-ebe6ddff.js";import{T as h,F as G,I as V}from"./TextField-32d44c51.js";import{I as ft,a as ne,b as De,c as ce,D as Re,d as qe,e as Te,f as Ne,S as Ct}from"./IconTrash-27718a5b.js";import{b as _t,F as St,S as Y,A as Be}from"./Select-5e0a2fa0.js";import{M as p}from"./MenuItem-90e72243.js";import{T as Ue,a as N}from"./Tabs-73cb82d7.js";import{c as W}from"./createReactComponent-0c7df6dc.js";import{B as z}from"./Button-bbfd11bb.js";import{T as kt}from"./TableContainer-ba397d3b.js";import{P as wt}from"./Stack-e027e86c.js";import{T as It,a as Mt,b as de,c as x,d as zt}from"./TableRow-335db815.js";import{T as n}from"./Typography-ebb123db.js";import{C as ue}from"./Chip-a1a18a82.js";import{I as A,L as $e}from"./Menu-69da4fd0.js";import{G as a}from"./Grid-fa4dfe26.js";import{D as At,I as Lt}from"./IconCalendar-59bb073f.js";import{a as he,L as me}from"./ListItemText-44e0f38b.js";import"./isMuiElement-2e8354c0.js";import"./useTheme-338ae4be.js";import"./ButtonBase-bf72575c.js";function Ft(j){return ct("MuiInputAdornment",j)}const Pt=ot("MuiInputAdornment",["root","filled","standard","outlined","positionStart","positionEnd","disablePointerEvents","hiddenLabel","sizeSmall"]),Oe=Pt;var Ge;const Et=["children","className","component","disablePointerEvents","disableTypography","position","variant"],Wt=(j,m)=>{const{ownerState:y}=j;return[m.root,m[`position${pe(y.position)}`],y.disablePointerEvents===!0&&m.disablePointerEvents,m[y.variant]]},Dt=j=>{const{classes:m,disablePointerEvents:y,hiddenLabel:L,position:f,size:D,variant:R}=j,g={root:["root",y&&"disablePointerEvents",f&&`position${pe(f)}`,R,L&&"hiddenLabel",D&&`size${pe(D)}`]};return xt(g,Ft,m)},Rt=dt("div",{name:"MuiInputAdornment",slot:"Root",overridesResolver:Wt})(({theme:j,ownerState:m})=>je({display:"flex",height:"0.01em",maxHeight:"2em",alignItems:"center",whiteSpace:"nowrap",color:(j.vars||j).palette.action.active},m.variant==="filled"&&{[`&.${Oe.positionStart}&:not(.${Oe.hiddenLabel})`]:{marginTop:16}},m.position==="start"&&{marginRight:8},m.position==="end"&&{marginLeft:8},m.disablePointerEvents===!0&&{pointerEvents:"none"})),qt=u.forwardRef(function(m,y){const L=ut({props:m,name:"MuiInputAdornment"}),{children:f,className:D,component:R="div",disablePointerEvents:g=!1,disableTypography:X=!1,position:J,variant:B}=L,F=ht(L,Et),w=_t()||{};let C=B;B&&w.variant,w&&!C&&(C=w.variant);const U=je({},L,{hiddenLabel:w.hiddenLabel,size:w.size,disablePointerEvents:g,position:J,variant:C}),K=Dt(U);return e.jsx(St.Provider,{value:null,children:e.jsx(Rt,je({as:R,ownerState:U,className:mt(K.root,D),ref:y},F,{children:typeof f=="string"&&!X?e.jsx(n,{color:"text.secondary",children:f}):e.jsxs(u.Fragment,{children:[J==="start"?Ge||(Ge=e.jsx("span",{className:"notranslate",children:"​"})):null,f]})}))})}),H=qt;var Tt=W("category","IconCategory",[["path",{d:"M4 4h6v6h-6z",key:"svg-0"}],["path",{d:"M14 4h6v6h-6z",key:"svg-1"}],["path",{d:"M4 14h6v6h-6z",key:"svg-2"}],["path",{d:"M17 17m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0",key:"svg-3"}]]),Nt=W("clock","IconClock",[["path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0",key:"svg-0"}],["path",{d:"M12 7v5l3 3",key:"svg-1"}]]),Bt=W("coin","IconCoin",[["path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0",key:"svg-0"}],["path",{d:"M14.8 9a2 2 0 0 0 -1.8 -1h-2a2 2 0 1 0 0 4h2a2 2 0 1 1 0 4h-2a2 2 0 0 1 -1.8 -1",key:"svg-1"}],["path",{d:"M12 7v10",key:"svg-2"}]]),Ve=W("eye","IconEye",[["path",{d:"M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0",key:"svg-0"}],["path",{d:"M21 12c-2.4 4 -5.4 6 -9 6c-3.6 0 -6.6 -2 -9 -6c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6",key:"svg-1"}]]),Ut=W("filter","IconFilter",[["path",{d:"M4 4h16v2.172a2 2 0 0 1 -.586 1.414l-4.414 4.414v7l-6 2v-8.5l-4.48 -4.928a2 2 0 0 1 -.52 -1.345v-2.227z",key:"svg-0"}]]),$t=W("sort-ascending","IconSortAscending",[["path",{d:"M4 6l7 0",key:"svg-0"}],["path",{d:"M4 12l7 0",key:"svg-1"}],["path",{d:"M4 18l9 0",key:"svg-2"}],["path",{d:"M15 9l3 -3l3 3",key:"svg-3"}],["path",{d:"M18 6l0 12",key:"svg-4"}]]),Ot=W("x","IconX",[["path",{d:"M18 6l-12 12",key:"svg-0"}],["path",{d:"M6 6l12 12",key:"svg-1"}]]);const xe=j=>{switch(j){case"Foundation":return"info";case"Diploma":return"success";case"Degree":return"primary";case"Masters":return"warning";case"PhD":return"error";default:return"default"}},ms=()=>{var Se,ke,we,Ie,Me,ze,Ae,Le,Fe,Pe,Ee;const[j,m]=u.useState([]),[y,L]=u.useState([]),[f,D]=u.useState([]),[R,g]=u.useState(!0),[X,J]=u.useState(null),[B,F]=u.useState(!1),[w,C]=u.useState(!1),[U,K]=u.useState("add"),[ge,Ye]=u.useState("table"),[Q,He]=u.useState(""),[ie,Xe]=u.useState("all"),[ae,Je]=u.useState("all"),[$,Ke]=u.useState(0),[r,b]=u.useState({name:"",description:"",level:"",duration:"",total_fee:"",university_id:"",primary_category:"",intakes:[],created_at:new Date}),[c,Qe]=u.useState(null),[Z,_]=u.useState({open:!1,message:"",severity:"success"});u.useEffect(()=>{(async()=>{try{g(!0);const i=(await O(T(S,"courses"))).docs.map(M=>({id:M.id,...M.data()}));m(i);const d=(await O(T(S,"universities"))).docs.map(M=>({id:M.id,...M.data()}));L(d);const I=(await O(T(S,"categories"))).docs.map(M=>({id:M.id,...M.data()}));D(I),g(!1)}catch(s){console.error("Error fetching data:",s),J("Failed to load data. Please try again."),g(!1)}})()},[]);const Ze=()=>{try{b({name:"",description:"",level:"",duration:"",total_fee:"",university_id:"",primary_category:"",intakes:[],created_at:new Date}),K("add"),F(!0)}catch(t){console.error("Error opening add dialog:",t),_({open:!0,message:`Error: ${t.message}`,severity:"error"})}},le=t=>{try{if(!t)throw new Error("Course data is invalid");b({id:t.id,name:t.name||"",description:t.description||"",level:t.level||"",duration:t.duration||"",total_fee:t.total_fee||"",university_id:t.university_id||"",primary_category:t.primary_category||"",intakes:t.intakes||[],created_at:t.created_at||new Date}),K("edit"),F(!0)}catch(s){console.error("Error opening edit dialog:",s),_({open:!0,message:`Error: ${s.message}`,severity:"error"})}},be=async t=>{try{g(!0),Qe(t),C(!0)}catch(s){console.error("Error fetching course details:",s),_({open:!0,message:`Error: ${s.message}`,severity:"error"})}finally{g(!1)}},P=t=>{const{name:s,value:i}=t.target;b(s==="total_fee"?{...r,[s]:i===""?"":parseFloat(i)}:{...r,[s]:i})},et=t=>{const i=t.target.value.split(",").map(l=>l.trim()).filter(l=>l!=="");b({...r,intakes:i})},ee=(t,s)=>{b({...r,fee_breakdown:{...r.fee_breakdown||{},[t]:s===""?"":parseFloat(s)}})},E=(t,s,i)=>{const l={...r.entry_requirements||{}};l[t]||(l[t]={}),s==="min_cgpa"?l[t].min_cgpa=i===""?"":parseFloat(i):s==="required_subjects"&&(l[t].required_subjects=[{min_grade:i.grade,count:parseInt(i.count)}]),b({...r,entry_requirements:l})},tt=(t,s,i)=>{const l={...r.subjects||{}};l[t]||(l[t]=[]);const d=[...l[t]];s>=d.length?d.push(i):d[s]=i;const q=d.filter(I=>I.trim()!=="");l[t]=q,b({...r,subjects:l})},st=t=>{const s={...r.subjects||{}};s[t]||(s[t]=[]),s[t].push(""),b({...r,subjects:s})},rt=(t,s)=>{const i={...r.subjects||{}};i[t]&&i[t].length>s&&(i[t].splice(s,1),i[t].length===0&&delete i[t],b({...r,subjects:i}))},ve=()=>{const t=r.subjects?Object.keys(r.subjects):[];let s=1,i=`Year ${s}`;for(;t.includes(i);)s++,i=`Year ${s}`;const l={...r.subjects||{},[i]:[""]};b({...r,subjects:l})},nt=async()=>{try{g(!0);let t="";if(r.university_id){const d=await jt(oe(S,"universities",r.university_id));d.exists()&&(t=d.data().name)}const s={...r,university_name:t,updated_at:new Date};if(U==="add")await pt(T(S,"courses"),s),_({open:!0,message:"Course added successfully!",severity:"success"});else{const d=oe(S,"courses",r.id),{id:q,...I}=s;await gt(d,I,{merge:!0}),_({open:!0,message:"Course updated successfully!",severity:"success"})}F(!1);const l=(await O(T(S,"courses"))).docs.map(d=>({id:d.id,...d.data()}));m(l)}catch(t){console.error("Error saving course:",t),_({open:!0,message:`Error: ${t.message}`,severity:"error"})}finally{g(!1)}},ye=async t=>{if(window.confirm("Are you sure you want to delete this course?"))try{g(!0),await bt(oe(S,"courses",t)),_({open:!0,message:"Course deleted successfully!",severity:"success"});const i=(await O(T(S,"courses"))).docs.map(l=>({id:l.id,...l.data()}));m(i)}catch(s){console.error("Error deleting course:",s),_({open:!0,message:`Error: ${s.message}`,severity:"error"})}finally{g(!1)}},fe=()=>{_({...Z,open:!1})},te=j.filter(t=>{var d,q,I;const s=((d=t.name)==null?void 0:d.toLowerCase().includes(Q.toLowerCase()))||((q=t.description)==null?void 0:q.toLowerCase().includes(Q.toLowerCase()))||((I=t.university_name)==null?void 0:I.toLowerCase().includes(Q.toLowerCase())),i=ie==="all"||t.primary_category===ie,l=ae==="all"||t.level===ae;return s&&i&&l}),it=[...new Set(j.map(t=>t.level).filter(Boolean))],Ce=t=>{const s=["#2196f3","#4caf50","#f44336","#ff9800"];return s[t%s.length]},at=t=>t?Object.entries(t).map(([s,i])=>({year:s,subjects:i})):[],lt=t=>t?Object.entries(t).map(([s,i])=>({examType:s,details:i})):[],_e=()=>r.fee_breakdown?Object.values(r.fee_breakdown).reduce((t,s)=>{const i=parseFloat(s)||0;return t+i},0):0,se=t=>!r.entry_requirements||!r.entry_requirements[t]||!r.entry_requirements[t].required_subjects||!r.entry_requirements[t].required_subjects[0]?"":r.entry_requirements[t].required_subjects[0].min_grade||"",re=t=>!r.entry_requirements||!r.entry_requirements[t]||!r.entry_requirements[t].required_subjects||!r.entry_requirements[t].required_subjects[0]?"":r.entry_requirements[t].required_subjects[0].count||"";return e.jsx(vt,{title:"Course Management",description:"Manage all courses",children:e.jsxs(yt,{title:"Courses",children:[e.jsxs(o,{mb:3,display:"flex",justifyContent:"space-between",alignItems:"center",children:[e.jsxs(o,{display:"flex",alignItems:"center",gap:2,children:[e.jsx(h,{size:"small",placeholder:"Search courses...",value:Q,onChange:t=>He(t.target.value),sx:{width:300},InputProps:{startAdornment:e.jsx(ft,{size:"20",style:{marginRight:"8px"}})}}),e.jsxs(G,{size:"small",sx:{minWidth:120},children:[e.jsx(V,{id:"category-filter-label",children:"Category"}),e.jsxs(Y,{labelId:"category-filter-label",value:ie,label:"Category",onChange:t=>Xe(t.target.value),children:[e.jsx(p,{value:"all",children:"All Categories"}),f.map(t=>e.jsx(p,{value:t.name,children:t.name},t.id))]})]}),e.jsxs(G,{size:"small",sx:{minWidth:120},children:[e.jsx(V,{id:"level-filter-label",children:"Level"}),e.jsxs(Y,{labelId:"level-filter-label",value:ae,label:"Level",onChange:t=>Je(t.target.value),children:[e.jsx(p,{value:"all",children:"All Levels"}),it.map(t=>e.jsx(p,{value:t,children:t},t))]})]})]}),e.jsxs(o,{display:"flex",alignItems:"center",gap:2,children:[e.jsxs(Ue,{value:ge,onChange:(t,s)=>Ye(s),"aria-label":"view mode tabs",children:[e.jsx(N,{value:"table",icon:e.jsx(Ut,{size:"18"})}),e.jsx(N,{value:"grid",icon:e.jsx($t,{size:"18"})})]}),e.jsx(z,{variant:"contained",color:"primary",startIcon:e.jsx(ne,{size:"18"}),onClick:Ze,children:"Add Course"})]})]}),R&&!B&&!w?e.jsx(o,{display:"flex",justifyContent:"center",alignItems:"center",py:4,children:e.jsx(We,{})}):X?e.jsx(Be,{severity:"error",children:X}):e.jsx(e.Fragment,{children:ge==="table"?e.jsx(kt,{component:wt,sx:{boxShadow:"none"},children:e.jsxs(It,{sx:{minWidth:650},"aria-label":"courses table",children:[e.jsx(Mt,{children:e.jsxs(de,{children:[e.jsx(x,{children:"Course Name"}),e.jsx(x,{children:"University"}),e.jsx(x,{children:"Level"}),e.jsx(x,{children:"Duration"}),e.jsx(x,{children:"Fees"}),e.jsx(x,{children:"Category"}),e.jsx(x,{children:"Actions"})]})}),e.jsx(zt,{children:te.length>0?te.map(t=>e.jsxs(de,{children:[e.jsxs(x,{children:[e.jsx(n,{variant:"subtitle2",fontWeight:600,children:t.name}),t.description&&e.jsx(n,{variant:"body2",color:"textSecondary",sx:{overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical"},children:t.description})]}),e.jsx(x,{children:t.university_name||"N/A"}),e.jsx(x,{children:e.jsx(ue,{label:t.level||"N/A",size:"small",color:xe(t.level)})}),e.jsx(x,{children:t.duration||"N/A"}),e.jsx(x,{children:t.total_fee!==void 0&&t.total_fee!==null?`RM ${t.total_fee.toLocaleString()}`:"N/A"}),e.jsx(x,{children:t.primary_category||"N/A"}),e.jsxs(x,{children:[e.jsx(A,{color:"info",size:"small",onClick:()=>be(t),children:e.jsx(Ve,{size:"18"})}),e.jsx(A,{color:"primary",size:"small",onClick:()=>le(t),children:e.jsx(De,{size:"18"})}),e.jsx(A,{color:"error",size:"small",onClick:()=>ye(t.id),children:e.jsx(ce,{size:"18"})})]})]},t.id)):e.jsx(de,{children:e.jsx(x,{colSpan:7,align:"center",children:e.jsx(n,{variant:"body2",color:"textSecondary",py:2,children:"No courses found."})})})})]})}):e.jsx(a,{container:!0,spacing:3,children:te.length>0?te.map((t,s)=>e.jsx(a,{item:!0,xs:12,sm:6,md:4,lg:3,children:e.jsxs(v,{sx:{height:"100%"},children:[e.jsxs(o,{sx:{position:"relative"},children:[e.jsx(o,{sx:{width:"100%",height:"140px",backgroundColor:Ce(s),display:"flex",justifyContent:"center",alignItems:"center",color:"#ffffff",fontWeight:"bold"},children:t.primary_category||"Course"}),e.jsx(ue,{label:t.level||"N/A",size:"small",color:xe(t.level),sx:{position:"absolute",top:"10px",left:"10px"}})]}),e.jsxs(k,{children:[e.jsx(n,{variant:"h6",gutterBottom:!0,noWrap:!0,children:t.name}),e.jsx(n,{variant:"body2",color:"textSecondary",gutterBottom:!0,children:t.university_name||"Unknown University"}),e.jsxs(o,{display:"flex",justifyContent:"space-between",alignItems:"center",mt:1,children:[e.jsxs(n,{variant:"h6",children:["RM",(t.total_fee||0).toLocaleString()]}),e.jsx(n,{color:"textSecondary",variant:"caption",children:t.duration||"Unknown duration"})]}),e.jsxs(o,{mt:1,display:"flex",justifyContent:"space-between",children:[e.jsx(A,{size:"small",color:"info",onClick:()=>be(t),children:e.jsx(Ve,{size:"16"})}),e.jsxs(o,{children:[e.jsx(A,{size:"small",color:"primary",onClick:()=>le(t),children:e.jsx(De,{size:"16"})}),e.jsx(A,{size:"small",color:"error",onClick:()=>ye(t.id),children:e.jsx(ce,{size:"16"})})]})]})]})]})},t.id)):e.jsx(a,{item:!0,xs:12,children:e.jsx(n,{align:"center",color:"textSecondary",children:"No courses available to display."})})})}),e.jsx(Re,{open:w,onClose:()=>C(!1),fullWidth:!0,maxWidth:"md",children:c&&e.jsxs(e.Fragment,{children:[e.jsxs(qe,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx(n,{variant:"h6",children:"Course Details"}),e.jsx(A,{onClick:()=>C(!1),children:e.jsx(Ot,{size:"18"})})]}),e.jsxs(Te,{children:[e.jsxs(o,{sx:{mb:3},children:[e.jsx(o,{sx:{height:"100px",backgroundColor:Ce(1),display:"flex",justifyContent:"center",alignItems:"center",borderRadius:1,mb:2},children:e.jsx(n,{variant:"h4",color:"white",children:c.primary_category||"Course"})}),e.jsx(n,{variant:"h5",fontWeight:600,children:c.name}),e.jsx(n,{variant:"subtitle1",color:"primary",fontWeight:500,children:c.university_name||"Unknown University"}),e.jsx(ue,{label:c.level||"N/A",size:"small",color:xe(c.level),sx:{mt:1}})]}),e.jsx(At,{sx:{my:2}}),e.jsxs(a,{container:!0,spacing:2,sx:{mb:3},children:[e.jsxs(a,{item:!0,xs:12,sm:6,md:3,children:[e.jsxs(o,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(Lt,{size:"20",style:{marginRight:"8px",color:"#1976d2"}}),e.jsx(n,{variant:"body2",fontWeight:500,children:"Intakes"})]}),e.jsx(n,{variant:"body1",sx:{mt:1,pl:3.5},children:c.intakes&&c.intakes.length>0?c.intakes.join(", "):"No intake information"})]}),e.jsxs(a,{item:!0,xs:12,sm:6,md:3,children:[e.jsxs(o,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(Nt,{size:"20",style:{marginRight:"8px",color:"#1976d2"}}),e.jsx(n,{variant:"body2",fontWeight:500,children:"Duration"})]}),e.jsx(n,{variant:"body1",sx:{mt:1,pl:3.5},children:c.duration||"Not specified"})]}),e.jsxs(a,{item:!0,xs:12,sm:6,md:3,children:[e.jsxs(o,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(Bt,{size:"20",style:{marginRight:"8px",color:"#1976d2"}}),e.jsx(n,{variant:"body2",fontWeight:500,children:"Total Fee"})]}),e.jsx(n,{variant:"body1",sx:{mt:1,pl:3.5},children:c.total_fee!==void 0&&c.total_fee!==null?`RM ${c.total_fee.toLocaleString()}`:"Not specified"})]}),e.jsxs(a,{item:!0,xs:12,sm:6,md:3,children:[e.jsxs(o,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(Tt,{size:"20",style:{marginRight:"8px",color:"#1976d2"}}),e.jsx(n,{variant:"body2",fontWeight:500,children:"Category"})]}),e.jsx(n,{variant:"body1",sx:{mt:1,pl:3.5},children:c.primary_category||"Not categorized"})]})]}),c.description&&e.jsxs(o,{sx:{mb:3},children:[e.jsx(n,{variant:"h6",sx:{mb:1},children:"Description"}),e.jsx(n,{variant:"body1",children:c.description})]}),c.subjects&&Object.keys(c.subjects).length>0&&e.jsxs(o,{sx:{mb:3},children:[e.jsx(n,{variant:"h6",sx:{mb:1},children:"Subjects"}),e.jsx(a,{container:!0,spacing:2,children:at(c.subjects).map((t,s)=>e.jsx(a,{item:!0,xs:12,sm:6,md:4,children:e.jsx(v,{variant:"outlined",sx:{height:"100%"},children:e.jsxs(k,{children:[e.jsx(n,{variant:"subtitle1",fontWeight:600,sx:{mb:1},children:t.year}),e.jsx($e,{dense:!0,disablePadding:!0,children:t.subjects.map((i,l)=>e.jsx(he,{disablePadding:!0,sx:{py:.5},children:e.jsx(me,{primary:i,primaryTypographyProps:{variant:"body2"}})},l))})]})})},s))})]}),c.entry_requirements&&Object.keys(c.entry_requirements).length>0&&e.jsxs(o,{sx:{mb:3},children:[e.jsx(n,{variant:"h6",sx:{mb:1},children:"Entry Requirements"}),e.jsx(a,{container:!0,spacing:2,children:lt(c.entry_requirements).map((t,s)=>e.jsx(a,{item:!0,xs:12,sm:6,md:4,children:e.jsx(v,{variant:"outlined",children:e.jsxs(k,{children:[e.jsx(n,{variant:"subtitle1",fontWeight:600,sx:{mb:1},children:t.examType}),t.details.min_cgpa&&e.jsxs(n,{variant:"body2",children:["Minimum CGPA: ",t.details.min_cgpa]}),t.details.required_subjects&&e.jsxs(o,{sx:{mt:1},children:[e.jsx(n,{variant:"body2",sx:{mb:.5},children:"Required Subjects:"}),t.details.required_subjects.map((i,l)=>e.jsxs(n,{variant:"body2",sx:{pl:2},children:["• ",i.count," subject(s) with minimum grade ",i.min_grade]},l))]})]})})},s))})]}),c.fee_breakdown&&Object.keys(c.fee_breakdown).length>0&&e.jsxs(o,{sx:{mb:3},children:[e.jsx(n,{variant:"h6",sx:{mb:1},children:"Fee Breakdown"}),e.jsx(v,{variant:"outlined",children:e.jsxs($e,{children:[Object.entries(c.fee_breakdown).map(([t,s],i)=>e.jsx(he,{divider:i<Object.keys(c.fee_breakdown).length-1,children:e.jsx(me,{primary:t.charAt(0).toUpperCase()+t.slice(1),secondary:`RM ${parseFloat(s).toLocaleString()}`})},i)),e.jsx(he,{sx:{bgcolor:"rgba(25, 118, 210, 0.08)"},children:e.jsx(me,{primary:"Total",secondary:`RM ${c.total_fee?c.total_fee.toLocaleString():0}`,primaryTypographyProps:{fontWeight:"bold"},secondaryTypographyProps:{fontWeight:"bold"}})})]})})]})]}),e.jsxs(Ne,{children:[e.jsx(z,{onClick:()=>C(!1),children:"Close"}),e.jsx(z,{variant:"contained",color:"primary",onClick:()=>{C(!1),le(c)},children:"Edit Course"})]})]})}),e.jsxs(Re,{open:B,onClose:()=>F(!1),fullWidth:!0,maxWidth:"md",scroll:"paper",children:[e.jsx(qe,{children:U==="add"?"Add New Course":"Edit Course"}),e.jsx(Te,{dividers:!0,children:e.jsxs(o,{component:"form",sx:{mt:1},children:[e.jsxs(Ue,{value:$,onChange:(t,s)=>Ke(s),variant:"scrollable",scrollButtons:"auto",sx:{mb:3,borderBottom:1,borderColor:"divider"},children:[e.jsx(N,{label:"Basic Information"}),e.jsx(N,{label:"Subjects"}),e.jsx(N,{label:"Fees"}),e.jsx(N,{label:"Entry Requirements"})]}),$===0&&e.jsxs(a,{container:!0,spacing:2,children:[e.jsx(a,{item:!0,xs:12,sm:8,children:e.jsx(h,{fullWidth:!0,label:"Course Name",name:"name",value:r.name,onChange:P,required:!0})}),e.jsx(a,{item:!0,xs:12,sm:4,children:e.jsxs(G,{fullWidth:!0,children:[e.jsx(V,{id:"level-select-label",children:"Level"}),e.jsxs(Y,{labelId:"level-select-label",name:"level",value:r.level,label:"Level",onChange:P,children:[e.jsx(p,{value:"",children:"Select Level"}),e.jsx(p,{value:"Foundation",children:"Foundation"}),e.jsx(p,{value:"Diploma",children:"Diploma"}),e.jsx(p,{value:"Degree",children:"Degree"}),e.jsx(p,{value:"Masters",children:"Masters"}),e.jsx(p,{value:"PhD",children:"PhD"})]})]})}),e.jsx(a,{item:!0,xs:12,children:e.jsx(h,{fullWidth:!0,label:"Description",name:"description",value:r.description,onChange:P,multiline:!0,rows:3})}),e.jsx(a,{item:!0,xs:12,sm:6,children:e.jsxs(G,{fullWidth:!0,children:[e.jsx(V,{id:"university-select-label",children:"University"}),e.jsxs(Y,{labelId:"university-select-label",name:"university_id",value:r.university_id,label:"University",onChange:P,children:[e.jsx(p,{value:"",children:"Select University"}),y.map(t=>e.jsx(p,{value:t.id,children:t.name},t.id))]})]})}),e.jsx(a,{item:!0,xs:12,sm:6,children:e.jsxs(G,{fullWidth:!0,children:[e.jsx(V,{id:"category-select-label",children:"Category"}),e.jsxs(Y,{labelId:"category-select-label",name:"primary_category",value:r.primary_category,label:"Category",onChange:P,children:[e.jsx(p,{value:"",children:"Select Category"}),f.map(t=>e.jsx(p,{value:t.name,children:t.name},t.id))]})]})}),e.jsx(a,{item:!0,xs:12,sm:6,children:e.jsx(h,{fullWidth:!0,label:"Duration",name:"duration",value:r.duration,onChange:P,placeholder:"e.g. 3 years, 2 semesters"})}),e.jsx(a,{item:!0,xs:12,sm:6,children:e.jsx(h,{fullWidth:!0,label:"Intake Months (comma separated)",name:"intakes",value:((Se=r.intakes)==null?void 0:Se.join(", "))||"",onChange:et,placeholder:"e.g. Jan, Mar, Sep",helperText:"Enter month names separated by commas"})})]}),$===1&&e.jsxs(e.Fragment,{children:[e.jsxs(o,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,children:[e.jsx(n,{variant:"subtitle1",children:"Course Subjects"}),e.jsx(z,{size:"small",startIcon:e.jsx(ne,{size:16}),onClick:ve,children:"Add Year"})]}),r.subjects&&Object.keys(r.subjects).length>0?Object.entries(r.subjects).map(([t,s])=>e.jsx(v,{variant:"outlined",sx:{mb:3},children:e.jsxs(k,{children:[e.jsxs(o,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,children:[e.jsx(n,{variant:"subtitle1",children:t}),e.jsx(z,{size:"small",startIcon:e.jsx(ne,{size:16}),onClick:()=>st(t),children:"Add Subject"})]}),s.map((i,l)=>e.jsxs(o,{display:"flex",alignItems:"center",mb:1,children:[e.jsx(h,{fullWidth:!0,size:"small",label:`Subject ${l+1}`,value:i,onChange:d=>tt(t,l,d.target.value)}),e.jsx(A,{color:"error",onClick:()=>rt(t,l),sx:{ml:1},children:e.jsx(ce,{size:18})})]},l))]})},t)):e.jsxs(o,{textAlign:"center",py:4,children:[e.jsx(n,{color:"textSecondary",mb:2,children:"No subjects added yet"}),e.jsx(z,{variant:"outlined",startIcon:e.jsx(ne,{size:18}),onClick:ve,children:"Add Year 1"})]})]}),$===2&&e.jsxs(e.Fragment,{children:[e.jsx(n,{variant:"subtitle1",gutterBottom:!0,children:"Total Fee"}),e.jsx(h,{fullWidth:!0,label:"Total Fee (RM)",name:"total_fee",value:r.total_fee,onChange:P,type:"number",InputProps:{startAdornment:e.jsx(H,{position:"start",children:"RM"})},sx:{mb:3}}),e.jsx(n,{variant:"subtitle1",gutterBottom:!0,children:"Fee Breakdown"}),e.jsx(n,{variant:"body2",color:"textSecondary",mb:2,children:"Specify individual fee components (the sum should match the total fee)"}),e.jsxs(a,{container:!0,spacing:2,children:[e.jsx(a,{item:!0,xs:12,sm:6,children:e.jsx(h,{fullWidth:!0,label:"Registration Fee",value:((ke=r.fee_breakdown)==null?void 0:ke.registration)||"",onChange:t=>ee("registration",t.target.value),type:"number",InputProps:{startAdornment:e.jsx(H,{position:"start",children:"RM"})}})}),e.jsx(a,{item:!0,xs:12,sm:6,children:e.jsx(h,{fullWidth:!0,label:"Tuition Fee",value:((we=r.fee_breakdown)==null?void 0:we.tuition)||"",onChange:t=>ee("tuition",t.target.value),type:"number",InputProps:{startAdornment:e.jsx(H,{position:"start",children:"RM"})}})}),e.jsx(a,{item:!0,xs:12,sm:6,children:e.jsx(h,{fullWidth:!0,label:"Resource Fee",value:((Ie=r.fee_breakdown)==null?void 0:Ie.resources)||"",onChange:t=>ee("resources",t.target.value),type:"number",InputProps:{startAdornment:e.jsx(H,{position:"start",children:"RM"})}})}),e.jsx(a,{item:!0,xs:12,sm:6,children:e.jsx(h,{fullWidth:!0,label:"Other Fees",value:((Me=r.fee_breakdown)==null?void 0:Me.other)||"",onChange:t=>ee("other",t.target.value),type:"number",InputProps:{startAdornment:e.jsx(H,{position:"start",children:"RM"})}})})]}),e.jsxs(o,{mt:3,p:2,bgcolor:"rgba(25, 118, 210, 0.08)",borderRadius:1,children:[e.jsx(n,{variant:"subtitle2",children:"Fee Calculation"}),e.jsxs(o,{display:"flex",justifyContent:"space-between",mt:1,children:[e.jsx(n,{children:"Total Fee Components:"}),e.jsxs(n,{fontWeight:"bold",children:["RM ",_e()]})]}),e.jsxs(o,{display:"flex",justifyContent:"space-between",mt:1,children:[e.jsx(n,{children:"Main Total Fee:"}),e.jsxs(n,{fontWeight:"bold",children:["RM ",r.total_fee?r.total_fee.toLocaleString():0]})]}),r.total_fee!==_e()&&e.jsx(n,{color:"error",variant:"caption",mt:1,children:"Note: The sum of fee components doesn't match the total fee"})]})]}),$===3&&e.jsxs(e.Fragment,{children:[e.jsx(n,{variant:"subtitle1",gutterBottom:!0,children:"Entry Requirements"}),e.jsx(n,{variant:"body2",color:"textSecondary",mb:2,children:"Specify the entry requirements for different education backgrounds"}),e.jsxs(a,{container:!0,spacing:3,children:[e.jsx(a,{item:!0,xs:12,md:6,children:e.jsx(v,{variant:"outlined",children:e.jsxs(k,{children:[e.jsx(n,{variant:"subtitle1",mb:2,children:"A-Levels"}),e.jsxs(o,{mb:2,children:[e.jsx(n,{variant:"body2",mb:1,children:"Required Subjects:"}),e.jsxs(a,{container:!0,spacing:2,children:[e.jsx(a,{item:!0,xs:6,children:e.jsx(h,{fullWidth:!0,size:"small",label:"Minimum Grade",value:se("A-Levels"),onChange:t=>E("A-Levels","required_subjects",{grade:t.target.value,count:re("A-Levels")}),placeholder:"e.g. C"})}),e.jsx(a,{item:!0,xs:6,children:e.jsx(h,{fullWidth:!0,size:"small",label:"Number of Subjects",type:"number",value:re("A-Levels"),onChange:t=>E("A-Levels","required_subjects",{grade:se("A-Levels"),count:t.target.value}),placeholder:"e.g. 2"})})]})]})]})})}),e.jsx(a,{item:!0,xs:12,md:6,children:e.jsx(v,{variant:"outlined",children:e.jsxs(k,{children:[e.jsx(n,{variant:"subtitle1",mb:2,children:"STPM"}),e.jsx(h,{fullWidth:!0,size:"small",label:"Minimum CGPA",type:"number",value:((Ae=(ze=r.entry_requirements)==null?void 0:ze.STPM)==null?void 0:Ae.min_cgpa)||"",onChange:t=>E("STPM","min_cgpa",t.target.value),placeholder:"e.g. 2.33",InputProps:{inputProps:{min:0,max:4,step:.01}}})]})})}),e.jsx(a,{item:!0,xs:12,md:6,children:e.jsx(v,{variant:"outlined",children:e.jsxs(k,{children:[e.jsx(n,{variant:"subtitle1",mb:2,children:"UEC"}),e.jsxs(o,{mb:2,children:[e.jsx(n,{variant:"body2",mb:1,children:"Required Subjects:"}),e.jsxs(a,{container:!0,spacing:2,children:[e.jsx(a,{item:!0,xs:6,children:e.jsx(h,{fullWidth:!0,size:"small",label:"Minimum Grade",value:se("UEC"),onChange:t=>E("UEC","required_subjects",{grade:t.target.value,count:re("UEC")}),placeholder:"e.g. B"})}),e.jsx(a,{item:!0,xs:6,children:e.jsx(h,{fullWidth:!0,size:"small",label:"Number of Subjects",type:"number",value:re("UEC"),onChange:t=>E("UEC","required_subjects",{grade:se("UEC"),count:t.target.value}),placeholder:"e.g. 5"})})]})]})]})})}),e.jsx(a,{item:!0,xs:12,md:6,children:e.jsx(v,{variant:"outlined",children:e.jsxs(k,{children:[e.jsx(n,{variant:"subtitle1",mb:2,children:"Diploma"}),e.jsx(h,{fullWidth:!0,size:"small",label:"Minimum CGPA",type:"number",value:((Fe=(Le=r.entry_requirements)==null?void 0:Le.Diploma)==null?void 0:Fe.min_cgpa)||"",onChange:t=>E("Diploma","min_cgpa",t.target.value),placeholder:"e.g. 2.5",InputProps:{inputProps:{min:0,max:4,step:.01}}})]})})}),e.jsx(a,{item:!0,xs:12,md:6,children:e.jsx(v,{variant:"outlined",children:e.jsxs(k,{children:[e.jsx(n,{variant:"subtitle1",mb:2,children:"Foundation"}),e.jsx(h,{fullWidth:!0,size:"small",label:"Minimum CGPA",type:"number",value:((Ee=(Pe=r.entry_requirements)==null?void 0:Pe.Foundation)==null?void 0:Ee.min_cgpa)||"",onChange:t=>E("Foundation","min_cgpa",t.target.value),placeholder:"e.g. 2.5",InputProps:{inputProps:{min:0,max:4,step:.01}}})]})})})]})]})]})}),e.jsxs(Ne,{children:[e.jsx(z,{onClick:()=>F(!1),children:"Cancel"}),e.jsx(z,{onClick:nt,variant:"contained",color:"primary",disabled:!r.name,children:R?e.jsx(We,{size:24}):"Save"})]})]}),e.jsx(Ct,{open:Z.open,autoHideDuration:6e3,onClose:fe,anchorOrigin:{vertical:"bottom",horizontal:"right"},children:e.jsx(Be,{onClose:fe,severity:Z.severity,variant:"filled",children:Z.message})})]})})};export{ms as default};
